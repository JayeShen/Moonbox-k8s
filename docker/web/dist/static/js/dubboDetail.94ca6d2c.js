(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dubboDetail"],{3271:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-ruleForm"},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("基础信息")])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"traceId："}},[e._v("\n            "+e._s(e.traceId)+"\n          ")])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"协议类型："}},[e._v("\n            "+e._s(e.type)+"\n          ")])],1),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"采集机器："}},[e._v("\n            "+e._s(e.host)+"\n          ")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("接口信息")])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"接口uri："}},[e._v("\n            "+e._s(e.uri)+"\n          ")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("el-collapse",{class:["lever1",{noBorderBottom:e.paramCollapse.length}],model:{value:e.paramCollapse,callback:function(t){e.paramCollapse=t},expression:"paramCollapse"}},[t("el-collapse-item",{attrs:{name:"1",title:"请求参数"}},[t("el-table",{staticClass:"responseDiffsTable",attrs:{data:e.requestParameterArray,border:"","max-height":"500"}},[t("el-table-column",{attrs:{label:"序号",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.$index))])]}}])}),t("el-table-column",{attrs:{label:"参数值",prop:"parameterValue",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(a.row.parameterValue))]),t("div",[e._v(e._s(a.row.parameterValue))])])]}}])}),t("el-table-column",{attrs:{label:"参数类型",prop:"parameterType",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tooltip",{attrs:{placement:"top",effect:"dark"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(a.row.parameterType))]),t("div",[e._v(e._s(a.row.parameterType))])])]}}])})],1)],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("el-collapse",{class:["lever1",{noBorderBottom:e.responseCollapse.length}],model:{value:e.responseCollapse,callback:function(t){e.responseCollapse=t},expression:"responseCollapse"}},[t("el-collapse-item",{attrs:{name:"1",title:"响应内容"}},[t("el-form-item",[t("json-viewer",{attrs:{value:e.response,"expand-depth":5,expanded:!0,boxed:"",copyable:"",sort:""}})],1)],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("子调用对比结果")])]),t("el-form-item",{staticStyle:{float:"left"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入接口过滤",clearable:""},model:{value:e.inputSearch,callback:function(t){e.inputSearch=t},expression:"inputSearch"}})],1),t("el-table",{attrs:{data:e.filterData,border:"","max-height":"500"}},[t("el-table-column",{attrs:{label:"序号",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.$index))])]}}])}),t("el-table-column",{attrs:{label:"子调用类型",prop:"type",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"子调用信息",prop:"uri",align:"center","min-width":"400","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"执行耗时(毫秒)",prop:"cost",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.sonDetail(a.row)}}},[e._v("调用详情")])]}}])})],1)],1)],1),t("el-card",{staticClass:"add-record-bottom-component"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.resetForm()}}},[e._v("关闭")])],1),t("el-dialog",{attrs:{title:"调用详情",visible:e.dialogVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{staticClass:"demo-ruleForm"},[e.otherFlag?t("div",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("接口信息")])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"接口uri："}},[e._v("\n                "+e._s(e.dialogUri)+"\n              ")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("请求参数")])]),t("el-table",{attrs:{data:e.dialogParameterArray,border:"","max-height":"500"}},[t("el-table-column",{attrs:{label:"序号",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.$index))])]}}],null,!1,3869450744)}),t("el-table-column",{attrs:{label:"参数值",prop:"value",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"参数类型",prop:"type",align:"center","show-overflow-tooltip":""}})],1)],1),t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("响应内容")])]),t("el-form-item",[t("json-viewer",{attrs:{value:e.dialogResponse,"expand-depth":5,boxed:"",copyable:"",sort:""}})],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("调用堆栈")])]),e._l(e.stackTraces,(function(a,s){return t("div",{key:s},[e._v("\n            "+e._s(a)+"\n          ")])}))],2)],1):e._e(),e.httpFlag?t("div",[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("接口信息")])]),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"接口uri："}},[e._v("\n                "+e._s(e.dialogUri)+"\n              ")])],1)],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("请求参数")])]),t("h4",[e._v("接口headers")]),t("el-table",{attrs:{data:e.dialogHeadersArray,border:"","max-height":"500"}},[t("el-table-column",{attrs:{label:"key",prop:"key",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"value",prop:"value",align:"center","show-overflow-tooltip":""}})],1),t("h4",[e._v("接口params")]),t("el-table",{attrs:{data:e.dialogParamsArray,border:"","max-height":"500"}},[t("el-table-column",{attrs:{label:"key",prop:"key",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"value",prop:"value",align:"center","show-overflow-tooltip":""}})],1)],1),t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("请求body")])]),t("el-form-item",[t("json-viewer",{attrs:{value:e.dialogBody,"expand-depth":5,boxed:"",copyable:"",sort:""}})],1)],1),t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("响应内容")])]),t("el-form-item",[t("json-viewer",{attrs:{value:e.dialogResponse,"expand-depth":5,boxed:"",copyable:"",sort:""}})],1)],1),t("el-card",{attrs:{shadow:"hover"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("h3",[e._v("调用堆栈")])]),e._l(e.stackTraces,(function(a,s){return t("div",{key:s},[e._v("\n            "+e._s(a)+"\n          ")])}))],2)],1):e._e()]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},r=[],l=(a("fc02"),a("868d")),o=(a("a450"),a("085b"),a("0cdc"),a("f829")),i=(a("4890"),a("6161"),a("365c")),n=a("258b"),c=a.n(n),d={name:"v-dubbo-flow",components:{JsonViewer:c.a},props:["traceId","taskRunId","closeType"],data:function(){return{inputSearch:"",dialogVisible:!1,type:"",entranceInvocation:{},uri:"",host:"",request:[],parameterTypes:[],requestParameterArray:[],response:{},subInvocations:[],dialogUri:"",dialogRequest:[],dialogParameterTypes:[],dialogParameterArray:[],dialogHeaders:{},dialogParamsMap:{},dialogHeadersArray:[],dialogParamsArray:[],dialogBody:{},dialogResponse:{},httpFlag:!1,otherFlag:!1,activeResultTab:"subCallComparisonResult",stackTraces:"",paramCollapse:[],responseCollapse:[]}},mounted:function(){this.getDetail(this.traceId,this.taskRunId)},computed:{filterData:function(){var e=JSON.parse(JSON.stringify(this.subInvocations));if(this.inputSearch.trim()){var t=this;e=this.subInvocations.filter(function(e){return Object(o["a"])(this,this),-1!==e.uri.indexOf(t.inputSearch.trim())}.bind(this))}return e}},methods:{resetForm:function(){this.$store.dispatch("page/close",{tagName:this.$route.name,notNext:!0}),1==this.closeType?this.routerPush({name:"record",params:{},query:{}}):2==this.closeType&&this.routerPush({name:"playback",params:{},query:{}})},getDetail:function(e,t){""==e&&""==t||i["a"].record.flowDetail({traceId:e,taskRunId:t}).then(function(e){if(Object(o["a"])(this,this),"SUCCESS"===e.code){this.host=e.data.host,this.entranceInvocation=e.data.entranceInvocation,this.type=this.entranceInvocation.type,this.uri=this.entranceInvocation.uri,this.request=this.entranceInvocation.request,this.parameterTypes=this.entranceInvocation.parameterTypes;for(var t=0;t<this.request.length;t++)this.requestParameterArray.push({parameterValue:JSON.stringify(this.request[t]),parameterType:this.parameterTypes[t]});null!=this.entranceInvocation.response&&(this.response=this.entranceInvocation.response),this.subInvocations=e.data.subInvocations}else this.$message.error("获取dubbo详情失败:"+e.msg)}.bind(this))},sonDetail:function(e){if(this.httpFlag=!1,this.otherFlag=!1,this.dialogVisible=!0,this.dialogResponse={},e.response&&(this.dialogResponse=e.response),this.dialogUri="","http"===e.type.toLowerCase()||"okhttp"===e.type.toLowerCase()||"apache-http-client"===e.type.toLowerCase()){if(this.httpFlag=!0,this.dialogHeadersArray=[],this.dialogParamsArray=[],this.dialogUri=e.uri,this.dialogHeaders=e.headers,"object"==Object(l["a"])(e.body)&&null!=e.body&&(this.dialogBody=e.body),"string"==typeof e.body&&(this.dialogBody=e.body),"{}"!==JSON.stringify(this.dialogHeaders))for(var t in this.dialogHeaders)this.dialogHeadersArray.push({key:t,value:this.dialogHeaders[t]});if(this.dialogParamsMap=e.paramsMap,"{}"!==JSON.stringify(this.dialogParamsMap))for(var a in this.dialogParamsMap)this.dialogParamsArray.push({key:a,value:this.dialogParamsMap[a]})}else if(this.otherFlag=!0,this.dialogParameterArray=[],this.dialogUri=e.uri,this.dialogRequest=e.request,this.dialogParameterTypes=e.parameterTypes,this.dialogRequest&&this.dialogRequest.length)for(var s=0;s<this.dialogRequest.length;s++)this.dialogParameterArray.push({value:JSON.stringify(this.dialogRequest[s]),type:this.dialogParameterTypes[s]});this.stackTraces=e.stackTraces.split(/\n/)}}},p=d,h=(a("75ca"),a("e607")),u=Object(h["a"])(p,s,r,!1,null,"c6080944",null);t["a"]=u.exports},"399c":function(e,t,a){},"51a1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("v-dubbo-flow",{key:e.traceId,attrs:{traceId:e.traceId,taskRunId:e.taskRunId,closeType:1}})],1)},r=[],l=a("3271"),o={components:{vDubboFlow:l["a"]},data:function(){return{traceId:this.$route.params.traceId,taskRunId:this.$route.params.taskRunId}}},i=o,n=(a("e1f7"),a("e607")),c=Object(n["a"])(i,s,r,!1,null,"eb3715c4",null);t["default"]=c.exports},"60c7":function(e,t,a){},"75ca":function(e,t,a){"use strict";a("60c7")},e1f7:function(e,t,a){"use strict";a("399c")}}]);