(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["record"],{"0353":function(e,t,r){"use strict";var a=r("6bf8"),o=RegExp.prototype.exec,n=String.prototype.replace,i=o,s="lastIndex",c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],d=c||l;d&&(i=function(e){var t,r,i,d,u=this;return l&&(r=new RegExp("^"+u.source+"$(?!\\s)",a.call(u))),c&&(t=u[s]),i=o.call(u,e),c&&i&&(u[s]=u.global?i.index+i[0].length:t),l&&i&&i.length>1&&n.call(i[0],r,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(i[d]=void 0)})),i}),e.exports=i},"085b":function(e,t,r){"use strict";var a=r("e99b"),o=r("52a4")(!1),n=[].indexOf,i=!!n&&1/[1].indexOf(1,-0)<0;a(a.P+a.F*(i||!r("95b6")(n)),"Array",{indexOf:function(e){return i?n.apply(this,arguments)||0:o(this,e,arguments[1])}})},"15b7":function(e,t,r){},3872:function(e,t,r){"use strict";r("15b7")},"69b0":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"6bf8":function(e,t,r){"use strict";var a=r("a86f");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},bf73:function(e,t,r){"use strict";var a=r("0353");r("e99b")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},c46f:function(e,t,r){"use strict";r("bf73");var a=r("84e8"),o=r("065d"),n=r("0926"),i=r("3ab0"),s=r("839a"),c=r("0353"),l=s("species"),d=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();e.exports=function(e,t,r){var h=s(e),p=!n((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=p?!n((function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[l]=function(){return r}),r[h](""),!t})):void 0;if(!p||!m||"replace"===e&&!d||"split"===e&&!u){var g=/./[h],f=r(i,h,""[e],(function(e,t,r,a,o){return t.exec===c?p&&!o?{done:!0,value:g.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}})),b=f[0],w=f[1];a(String.prototype,e,b),o(RegExp.prototype,h,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}}},caae:function(e,t,r){"use strict";r.r(t);r("d91d");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",{staticClass:"box-card"},[t("el-form",{staticClass:"demo-ruleForm",attrs:{inline:!0},model:{value:e.recordForm,callback:function(t){e.recordForm=t},expression:"recordForm"}},[t("el-form-item",{attrs:{label:"录制模板编码"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"支持编码或者名称模糊查询",clearable:!0},on:{clear:function(t){return e.search(1,"clear")}},model:{value:e.recordForm.templateId,callback:function(t){e.$set(e.recordForm,"templateId",t)},expression:"recordForm.templateId"}})],1),t("el-form-item",{attrs:{label:"应用名称"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入",clearable:!0},on:{clear:function(t){return e.search(1,"clear")}},model:{value:e.recordForm.appName,callback:function(t){e.$set(e.recordForm,"appName",t)},expression:"recordForm.appName"}})],1),t("el-form-item",[t("el-button-group",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search(1)}}},[e._v("查询")])],1)],1)],1)],1),t("el-card",[t("el-form",[t("el-button",{staticClass:"fr",attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.dealRecord("add")}}},[e._v("新增模板")]),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table1",attrs:{data:e.recordForm.recordList,"expand-row-keys":e.recordForm.expands1,"header-cell-style":e.tableHeaderStyle,"row-key":"templateId",size:"small",border:""},on:{"expand-change":e.rowClick}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-form",{attrs:{inline:""}},[t("el-form-item",{attrs:{label:"执行编码"}},[t("el-input",{attrs:{size:"small",clearable:""},on:{clear:function(t){return e.search2(r.row,1)}},model:{value:e.recordForm.recordTaskRunId,callback:function(t){e.$set(e.recordForm,"recordTaskRunId",t)},expression:"recordForm.recordTaskRunId"}})],1),t("el-form-item",[t("el-button-group",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search2(r.row,1)}}},[e._v("查询")])],1)],1)],1),t("el-table",{ref:"table2",attrs:{data:r.row.executionList,"expand-row-keys":e.recordForm.expands2,"header-cell-style":e.tableHeaderStyle,"row-key":"taskRunId",size:"small",border:""},on:{"expand-change":function(t){return e.rowClick2(arguments[0],arguments[1])}}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-form",{attrs:{inline:""}},[t("el-form-item",{attrs:{label:"接口uri / java方法"}},[t("el-input",{attrs:{size:"small",clearable:!0},on:{clear:function(t){return e.search3(r.row,1)}},model:{value:e.recordForm.uriCondition,callback:function(t){e.$set(e.recordForm,"uriCondition",t)},expression:"recordForm.uriCondition"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search3(r.row,1)}}},[e._v("查询")])],1)],1),t("el-table",{ref:"table3",attrs:{data:r.row.tableData3,"expand-row-keys":e.recordForm.expands3,"header-cell-style":e.tableHeaderStyle,"row-key":"recordUri",size:"small",border:""},on:{"expand-change":function(t){return e.rowClick3(arguments[0],arguments[1],r.row.taskRunId)}}},[t("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-form",{attrs:{inline:""}},[t("el-form-item",[t("el-input",{staticStyle:{width:"360px",verticalAlign:"middle"},attrs:{clearable:"",size:"small"},on:{clear:function(t){return e.search4(a.row,1,r.row.taskRunId)}},model:{value:e.recordForm.traceIdCondition,callback:function(t){e.$set(e.recordForm,"traceIdCondition",t)},expression:"recordForm.traceIdCondition"}},[t("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.recordForm.traceIdUriConditionType,callback:function(t){e.$set(e.recordForm,"traceIdUriConditionType",t)},expression:"recordForm.traceIdUriConditionType"}},[t("el-option",{attrs:{label:"traceId",value:"1"}})],1)],1)],1),t("el-form-item",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.search4(a.row,1,r.row.taskRunId)}}},[e._v("查询")])],1)],1),t("el-table",{attrs:{data:a.row.tableData4,border:"","header-cell-style":e.tableHeaderStyle,size:"small"}},[t("el-table-column",{attrs:{label:"traceId",prop:"traceId",align:"center",width:"300px","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"采集机器",prop:"host",align:"center",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"采集时间",prop:"recordTime",align:"center",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"执行耗时(毫秒)",prop:"cost",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.flowDetail(r.row,a.row.invokeType)}}},[e._v("详情")]),t("el-button",{staticClass:"red",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteFlow(a.row,r.row)}}},[e._v("删除")])]}}],null,!0)})],1),e.showPage4?t("div",{staticClass:"block fr"},[t("el-pagination",{attrs:{"current-page":e.recordForm.currentPage4,"page-sizes":[6,10,20],"page-size":e.recordForm.pageSize4,total:e.recordForm.total4,layout:"total,sizes,prev,pager,next,jumper"},on:{"current-change":function(t){return e.currentChange4(a.row,r.row.taskRunId)},"size-change":function(t){return e.sizeChange4(a.row,r.row.taskRunId)},"update:currentPage":function(t){return e.$set(e.recordForm,"currentPage4",t)},"update:current-page":function(t){return e.$set(e.recordForm,"currentPage4",t)},"update:pageSize":function(t){return e.$set(e.recordForm,"pageSize4",t)},"update:page-size":function(t){return e.$set(e.recordForm,"pageSize4",t)}}})],1):e._e()]}}],null,!0)}),t("el-table-column",{attrs:{label:"接口uri / java方法",prop:"recordUri",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"接口协议",prop:"invokeType",align:"center",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"数据总量",prop:"recordCount",align:"center",formatter:e.formatTableTDBlank}})],1),e.showPage3?t("div",{staticClass:"block fr"},[t("el-pagination",{attrs:{"current-page":e.recordForm.currentPage3,"page-sizes":[6,10,20],"page-size":e.recordForm.pageSize3,total:e.recordForm.total3,layout:"total,sizes,prev,pager,next,jumper"},on:{"current-change":function(t){return e.currentChange3(r.row)},"size-change":function(t){return e.sizeChange3(r.row)},"update:currentPage":function(t){return e.$set(e.recordForm,"currentPage3",t)},"update:current-page":function(t){return e.$set(e.recordForm,"currentPage3",t)},"update:pageSize":function(t){return e.$set(e.recordForm,"pageSize3",t)},"update:page-size":function(t){return e.$set(e.recordForm,"pageSize3",t)}}})],1):e._e()]}}],null,!0)}),t("el-table-column",{attrs:{label:"执行编码",prop:"taskRunId",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"执行环境",prop:"runEnv",align:"center",width:"100px",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"执行状态",prop:"runStatusMsg",align:"center",width:"100px",formatter:e.formatTableTDBlank},scopedSlots:e._u([{key:"default",fn:function(r){return[2==r.row.runStatus?t("span",{staticClass:"blue"},[e._v(e._s(r.row.runStatusMsg))]):e._e(),3==r.row.runStatus?t("span",{staticClass:"green"},[e._v(e._s(r.row.runStatusMsg))]):e._e(),4==r.row.runStatus?t("span",{staticClass:"red"},[e._v(e._s(r.row.runStatusMsg))]):e._e(),6==r.row.runStatus?t("span",{staticClass:"orange"},[e._v(e._s(r.row.runStatusMsg))]):e._e()]}}],null,!0)}),t("el-table-column",{attrs:{label:"agent状态",prop:"agentStatusMsg",align:"center",width:"100px",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"描述",prop:"runDesc",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"开始时间",prop:"taskStartTime",align:"center",width:"140px",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"结束时间",prop:"taskEndTime",align:"center",width:"140px",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"采集总量",prop:"count",align:"center",width:"90px",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"330px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.run(a.row.taskRunId,r.row.templateId,"detail")}}},[e._v("详情")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.logSearch(a.row.taskRunId)}}},[e._v("日志")]),4===a.row.runStatus||5===a.row.runStatus||6===a.row.runStatus?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.tryTask(a.row.taskRunId,r.row)}}},[e._v("重新录制")]):e._e(),a.row.count>0?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.replay(a.row,r.row)}}},[e._v("流量回放")]):e._e(),a.row.count>0?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.replayList(a.row.taskRunId)}}},[e._v("回放列表")]):e._e(),1===a.row.agentStatus?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.heartbeatSearch(a.row.taskRunId)}}},[e._v("心跳列表")]):e._e(),1===a.row.runStatus||2===a.row.runStatus||3===a.row.runStatus||9===a.row.runStatus?t("el-button",{staticClass:"red",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.stop(a.row.taskRunId,r.row)}}},[e._v("停止")]):e._e(),4===a.row.runStatus||5===a.row.runStatus||6===a.row.runStatus?t("el-button",{staticClass:"red",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteTask(a.row.taskRunId,r.row)}}},[e._v("刪除")]):e._e()]}}],null,!0)})],1),e.showPage2?t("div",{staticClass:"block fr"},[t("el-pagination",{attrs:{"current-page":e.recordForm.currentPage2,"page-sizes":[6,10,20],"page-size":e.recordForm.pageSize2,total:e.recordForm.total2,layout:"total,sizes,prev,pager,next,jumper"},on:{"current-change":function(t){return e.currentChange2(r.row)},"size-change":function(t){return e.sizeChange2(r.row)},"update:currentPage":function(t){return e.$set(e.recordForm,"currentPage2",t)},"update:current-page":function(t){return e.$set(e.recordForm,"currentPage2",t)},"update:pageSize":function(t){return e.$set(e.recordForm,"pageSize2",t)},"update:page-size":function(t){return e.$set(e.recordForm,"pageSize2",t)}}})],1):e._e()]}}])}),t("el-table-column",{attrs:{label:"录制模板编码",prop:"templateId",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"模板名称",prop:"templateName",align:"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"应用名称",prop:"appName",align:"center",width:"180","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"创建人",prop:"createUser",align:"center",width:"80px",formatter:e.formatTableTDBlank},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",[e._v(e._s(r.row.createUser))]),r.row.createUserName?t("div",[e._v(e._s(r.row.createUserName))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:"center",width:"150px","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"更新人",prop:"updateUser",align:"center",width:"80px",formatter:e.formatTableTDBlank},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",[e._v(e._s(r.row.updateUser))]),r.row.updateUserName?t("div",[e._v(e._s(r.row.updateUserName))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"更新时间",prop:"updateTime",align:"center",width:"150px","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{label:"操作",prop:"alertStatus",align:"center",width:"180px",formatter:e.formatTableTDBlank},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.dealRecord("detail",r.row.templateId,r.row.id)}}},[e._v("详情")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.dealRecord("edit",r.row.templateId,r.row.id)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.run(null,r.row.templateId,"edit")}}},[e._v("运行")]),t("el-button",{staticClass:"red",attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteRecord(r.row.id)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"block fr"},[t("el-pagination",{attrs:{"current-page":e.recordForm.currentPage,"page-sizes":[10,50,100],"page-size":e.recordForm.pageSize,total:e.recordForm.total,layout:"total,sizes,prev,pager,next,jumper"},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1)],1),t("el-dialog",{attrs:{visible:e.dialogVisible,title:"心跳列表",width:"400px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-table",{attrs:{data:e.heartbeatList,size:"small"}},[t("el-table-column",{attrs:{prop:"ip",label:"ip",align:"center",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{prop:"lastHeartbeatTime",label:"最后心跳时间",align:"center",formatter:e.formatTableTDBlank}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],1),t("el-dialog",{attrs:{visible:e.logDialogVisible,title:"日志",width:"800px"},on:{"update:visible":function(t){e.logDialogVisible=t}}},[t("el-table",{attrs:{data:e.logList,size:"small"}},[t("el-table-column",{attrs:{prop:"content",label:"内容详情",align:"left","header-align":"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank}}),t("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"right","header-align":"center","show-overflow-tooltip":"",formatter:e.formatTableTDBlank,width:"150px"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},o=[],n=(r("085b"),r("246f"),r("0cdc"),r("f829")),i=(r("1bc7"),r("32ea"),r("a450"),r("365c")),s=r("ed08"),c={data:function(){return{templateId:"",taskRunId:"",logDialogVisible:!1,logList:[],heartbeatList:[],dialogVisible:!1,executionList:[],loading:!1,recordForm:{templateId:"",appName:"",recordList:[],expands1:[],currentPage:1,pageSize:10,total:0,recordTaskRunId:"",expands2:[],uriCondition:"",currentPage2:1,pageSize2:10,total2:0,currentPage3:1,pageSize3:10,total3:0,expands3:[],traceIdCondition:"",traceIdUriConditionType:"1",currentPage4:1,pageSize4:10,total4:0},showPage2:!0,showPage3:!0,showPage4:!0,currentExpandRow1:{},currentExpandRow2:{},currentExpandRow3:{}}},watch:{recordForm:{handler:function(){"record"==this.$route.name&&this.$store.dispatch("localstorage/pageSet",{instance:this})},deep:!0}},created:function(){var e=s["a"].getLocalStorage(this.$route.path);e&&e.recordForm&&Object.keys(e.recordForm).length&&(this.recordForm=e.recordForm),this.search("init")},methods:{search:function(e,t){"clear"===t&&this.routerPush({name:"record",params:{},query:{}}),1===e&&(this.recordForm.currentPage=1);var r={pageNum:this.recordForm.currentPage,pageSize:this.recordForm.pageSize,appName:this.recordForm.appName};""!==this.recordForm.templateId&&(r.condition=this.recordForm.templateId),this.loading=!0,i["a"].record.getRecordList(r).then(function(t){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===t.code?(this.recordForm.recordList=t.data.result,this.recordForm.total=t.data.total,this.recordForm.expands1.length&&t.data.result.length&&this.recordForm.recordList.forEach(function(t){Object(n["a"])(this,this),t.templateId===this.recordForm.expands1[0]&&this.rowClick(t,e)}.bind(this))):this.$message.error("查询录制任务列表失败："+t.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.$message.error(e.msg),this.loading=!1}.bind(this))},currentChange:function(e){this.recordForm.currentPage=e,this.search()},sizeChange:function(e){this.recordForm.pageSize=e,this.search(1)},rowClick:function(e,t){this.currentExpandRow1=e,"init"===t?(this.recordForm.expands1=[e.templateId],this.search2(e,t)):this.recordForm.expands1.indexOf(e.templateId)<0?(this.recordForm.recordTaskRunId="",this.recordForm.expands1=[],this.recordForm.expands2=[],this.recordForm.currentPage2=1,this.recordForm.pageSize2=10,this.recordForm.expands3=[],this.recordForm.currentPage3=1,this.recordForm.pageSize3=10,this.recordForm.expands1.push(e.templateId),this.search2(e)):this.recordForm.expands1=[]},search2:function(e,t){this.loading=!0,1===t&&(this.recordForm.currentPage2=1);var r={templateId:e.templateId,pageNum:this.recordForm.currentPage2,pageSize:this.recordForm.pageSize2,recordTaskRunId:this.recordForm.recordTaskRunId},a=this;i["a"].record.getExecutionList(r).then(function(r){Object(n["a"])(this,this),"SUCCESS"===r.code?(a.showPage2=!1,e.executionList=r.data.result||[],a.recordForm.total2=r.data.total,a.showPage2=!0,a.recordForm.expands2.length&&r.data.result.length&&e.executionList.forEach(function(e){Object(n["a"])(this,this),e.taskRunId===a.recordForm.expands2[0]&&a.rowClick2(e,t)}.bind(this))):a.$message.error("获取执行历史列表失败:"+r.msg),a.loading=!1}.bind(this),function(e){Object(n["a"])(this,this),a.loading=!1,this.$message.error(e.msg)}.bind(this))},currentChange2:function(e){this.closeExpandRow2(),this.search2(e)},sizeChange2:function(e){this.closeExpandRow2(),this.search2(e,1)},closeExpandRow2:function(){this.$refs.table2.toggleRowExpansion(this.currentExpandRow2,!1)},rowClick2:function(e,t){this.currentExpandRow2=e,"init"===t?(this.recordForm.expands2=[e.taskRunId],this.search3(e,t)):this.recordForm.expands2.indexOf(e.taskRunId)<0?(this.recordForm.uriCondition="",this.recordForm.expands2=[],this.recordForm.expands2.push(e.taskRunId),this.recordForm.expands3=[],this.recordForm.currentPage3=1,this.recordForm.pageSize3=10,this.search3(e,void 0)):this.recordForm.expands2=[]},search3:function(e,t){1===t&&(this.recordForm.currentPage3=1);var r={taskRunId:e.taskRunId,pageNum:this.recordForm.currentPage3,pageSize:this.recordForm.pageSize3,uriCondition:this.recordForm.uriCondition};this.loading=!0,i["a"].record.getUriDataCountList(r).then(function(r){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===r.code?(this.showPage3=!1,e.tableData3=r.data.result,this.recordForm.total3=r.data.total,this.showPage3=!0,this.recordForm.expands3.length&&e.tableData3.length&&e.tableData3.forEach(function(e){Object(n["a"])(this,this),e.recordUri===this.recordForm.expands3[0]&&this.rowClick3(e,t,e.recordTaskRunId)}.bind(this))):this.$message.error("获取列表失败："+r.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))},currentChange3:function(e){this.closeExpandRow3(),this.search3(e,void 0)},sizeChange3:function(e){this.closeExpandRow3(),this.search3(e,1)},closeExpandRow3:function(){this.$refs.table3.toggleRowExpansion(this.currentExpandRow3,!1)},rowClick3:function(e,t,r){this.currentExpandRow3=e,"init"===t?(this.recordForm.expands3=[e.recordUri],this.search4(e,void 0,r)):this.recordForm.expands3.indexOf(e.recordUri)<0?(this.recordForm.traceIdCondition="",this.recordForm.traceIdUriConditionType="1",this.recordForm.expands3=[],this.recordForm.expands3.push(e.recordUri),this.recordForm.currentPage4=1,this.recordForm.pageSize4=10,this.search4(e,void 0,r)):this.recordForm.expands3=[]},search4:function(e,t,r){1===t&&(this.recordForm.currentPage4=1);var a={pageNum:this.recordForm.currentPage4,pageSize:this.recordForm.pageSize4,taskRunId:e.taskRunId||r,traceIdCondition:this.recordForm.traceIdCondition,uri:e.recordUri};this.loading=!0,i["a"].record.getUriTaskDataList(a).then(function(t){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===t.code?(this.showPage4=!1,e.tableData4=t.data.result,this.recordForm.total4=t.data.total,this.showPage4=!0):this.$message.error("获取列表失败："+t.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))},execute:function(e){var t={taskRunId:e.taskRunId};this.loading=!0,i["a"].record.execute(t).then(function(t){Object(n["a"])(this,this),"SUCCESS"===t.code?(this.$message.success("执行成功"),this.search2(e,1)):this.$message.error("执行失败："+t.msg),this.loading=!1}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))},heartbeatSearch:function(e){i["a"].playback.getHeartbeatList({taskRunId:e}).then(function(e){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===e.code?(this.dialogVisible=!0,this.heartbeatList=e.data||[]):this.$message.error("获取心跳列表失败："+e.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.$message.error(e.msg)}.bind(this))},logSearch:function(e){this.logDialogVisible=!0,i["a"].record.getLogList({taskRunId:e}).then(function(e){Object(n["a"])(this,this),"SUCCESS"===e.code?null!==e.data.result?this.logList=e.data||[]:this.logList=[]:this.$message.error("获取日志列表失败："+e.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.$message.error(e.msg)}.bind(this))},currentChange4:function(e,t){this.recordForm.currentPage4*this.recordForm.pageSize4>=1e4?this.$message.warning("暂时不支持深度分页, 请使用搜索功能"):this.search4(e,void 0,t)},sizeChange4:function(e,t){this.search4(e,1,t)},deleteRecord:function(e){this.$confirm("您确定要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n["a"])(this,this),this.loading=!0,i["a"].record.delete({id:e}).then(function(e){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===e.code?(this.$message.success("删除成功"),this.search()):this.$message.error("删除录制任务失败："+e.msg)}.bind(this))}.bind(this)).catch(function(){Object(n["a"])(this,this),this.$message({type:"info",message:"已取消删除"})}.bind(this))},dealRecord:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a="新增录制";switch(e){case"edit":a="录制编辑";break;case"detail":a="录制详情";break}this.routerPush({name:"addRecord",params:{type:e,id:r,templateId:t},query:{titleName:a}})},replay:function(e){var t=e.taskRunId,r={type:"add",recordTaskRunId:t};this.routerPush({name:"addReplay",params:r,query:{titleName:"新增回放"}})},replayList:function(e){this.routerPush({name:"playback",query:{recordTaskRunId:e},params:{}})},run:function(e,t,r){var a="运行配置";"detail"===r&&(a="运行详情"),this.routerPush({name:"executionConfig",params:{taskRunId:e,templateId:t,type:r},query:{titleName:a}})},stop:function(e,t){this.loading=!0,i["a"].record.stop({taskRunId:e}).then(function(e){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===e.code?(this.$message.success("操作成功"),this.search2(t)):this.$message.error("操作失败："+e.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))},flowDetail:function(e,t){var r=e.traceId,a=e.recordTaskRunId;this.routerPush({name:"".concat(t,"Detail"),params:{traceId:r,taskRunId:a},query:{}})},deleteFlow:function(e,t){var r=t.traceId,a=t.recordTaskRunId;this.$confirm("您确定要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n["a"])(this,this);var t={traceId:r,taskRunId:a};this.loading=!0,i["a"].record.deleteFlow(t).then(function(t){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===t.code?(this.$message.success("删除成功"),this.search4(e,void 0,a)):this.$message.error("删除流量失败："+t.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))}.bind(this)).catch(function(){Object(n["a"])(this,this),this.$message({type:"info",message:"已取消删除"})}.bind(this))},deleteTask:function(e,t){this.$confirm("您确定要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n["a"])(this,this),this.loading=!0,i["a"].record.deleteTask({taskRunId:e}).then(function(e){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===e.code?(this.$message.success("删除成功"),this.search2(t,1),this.$forceUpdate()):this.$message.error("删除流量失败："+e.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))}.bind(this)).catch(function(){Object(n["a"])(this,this),this.$message({type:"info",message:"已取消删除"})}.bind(this))},tryTask:function(e,t){this.loading=!0,i["a"].record.tryTask({taskRunId:e}).then(function(e){Object(n["a"])(this,this),this.loading=!1,"SUCCESS"===e.code?(this.$message.success("重新录制成功"),this.search2(t,1)):this.$message.error("重新录制失败："+e.msg)}.bind(this),function(e){Object(n["a"])(this,this),this.loading=!1,this.$message.error(e.msg)}.bind(this))}}},l=c,d=(r("3872"),r("e607")),u=Object(d["a"])(l,a,o,!1,null,"67cb83ee",null);t["default"]=u.exports},d91d:function(e,t,r){"use strict";var a=r("a86f"),o=r("69b0"),n=r("f417");r("c46f")("search",1,(function(e,t,r,i){return[function(r){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a):new RegExp(r)[t](String(a))},function(e){var t=i(r,e,this);if(t.done)return t.value;var s=a(e),c=String(this),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var d=n(s,c);return o(s.lastIndex,l)||(s.lastIndex=l),null===d?-1:d.index}]}))},f417:function(e,t,r){"use strict";var a=r("d445"),o=RegExp.prototype.exec;e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var n=r.call(e,t);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}}}]);